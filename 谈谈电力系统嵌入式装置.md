# 谈谈电力系统嵌入式装置

本文所说的装置研发，指的是部署在现场，在特定物理环境下运行的嵌入式计算机设备，例如变电站保护测控、保护、稳控装置；配电网终端；新能源场站控制器；发电机励磁等。相对于装置研发，还有系统研发，指的是部署在数据中心的应用，例如调度自动化系统D5000、PMS设备管理系统等。

在很多电力研发企业中，装置研发和系统研发是由不同的团队负责，双方井水不犯河水，几乎没有交流。
下面讨论的都是个人观点。

## 装置不是孤立个体，而是大系统的一部分

装置研发出的功能首先要服务于系统整体，然后才是本地局部。随着通信能力的提高，系统的整合能力越来越强，这点应该是明显的趋势，例如二次设备现在都可以远程监控并投退软压板。

下面列举几个例子。对于系统稳定性来说，希望新能源在扰动过程中具备更强的支撑能力，包括在低电压穿越过程中提供更大的过载电流，这与装置自身的利益是对立的；还有发电机励磁有低励/过励限制功能，是保护设备的，但如果保护过度，轻易动作的话，反而会给电力系统电压稳定带来很大的压力。

## 通用化和模块化设计，软件发挥更大的作用

我们发现，其实很多电力系统装置的硬件是统一规格的，刷上不同的软件APP，就变成不同的装置，用在不同的场所，这一点极大的降低了研发成本。特别是物联网的发展，通过软件更新来扩展装置新的功能是一个趋势。

可编程逻辑控制器（PLC）可以被视为嵌入式硬件的一个范例。PLC硬件通常设计成通用型，能够适配广泛的输入/输出需求和各种工业环境。通过软件，同一款PLC可以在不同的应用中实现多样的控制任务。同时，很多PLC系统采用模块化设计，允许用户根据需要添加或更换I/O模块、通信模块等，这种模块化设计增强了系统的扩展性和灵活性。

## 装置研发与系统研发的界限正在逐渐模糊，两者之间的交叉合作和技术融合正变得越来越普遍

前面说过，装置研发的大部分工作本质上还是软件研发。对于系统研发来说，由于硬件都集中于数据中心，其硬件定制化的成本反而更低。为了处理特定任务（如机器学习、大数据分析、高频交易等），数据中心开始广泛采用FPGA（现场可编程门阵列）和ASIC（应用特定集成电路）等硬件加速器，这些技术传统上都是嵌入式领域的主要组成部分。

由于嵌入式CPU主频的提升，装置可以运行完整的操作系统（虽然是实时操作系统），很多传统上硬件的功能可以由软件实现。比如软件定义网络（Software-Defined Networking, SDN）技术就是用软件实现通信设备功能。再比如，电力系统测控装置的通信模块处理短时间重复的GOOSE报文，一般是用FPGA来实现。但是采用纯软件的DPDK、XDP等技术也可以完成，而且软件的研发成本要低得多。

事实上，装置研发与系统研发重复的地方也在增多。首先是电力通信协议的开发，双方各自处理一遍。另外，变电站站控层设备面对的其实是一个小型电力系统，电力系统主站需要的状态估计、综合智能告警等许多应用，智能变电站内部也需要。大型新能源电站的规模也已经非常庞大，许多装置需要处理系统级的功能。（比如说离网微电网的储能计划、能量管理、稳定控制，都是系统任务）。

很多边缘计算的节点，已经很难说到底是装置还是系统了。

## AI技术的进一步影响

以前AI基本上是在系统实现的，与现场装置没什么关系。随着专用AI硬件（如AI加速器）的发展，未来的嵌入式设备将能够本地执行复杂的AI推理任务，支持更加丰富的应用，如实时检测、故障诊断等。当然，装置会遇到新的挑战，特别是脱离变电站环境，需要满足装置设备在无电源或难以更换电源的环境中的运行需求和可靠通信。

## 装置研发、调试、测试工具的发展

开发工具将更加强调跨平台支持，C++可能会增加应用，另外对Python、Rust等现代编程语言的支持将继续增加。嵌入式装置还可以开通Web接口，以便进行远程调试和管理。另外，实时仿真和硬件在环（HIL）测试工具将会同步发展和普及，为开发者提供更准确的测试环境。
如果研发公司只有装置产品，没有系统产品。我的建议是：研发团队至少有一个人需要有系统研发经验或者系统甲方的工作经验。装置（包括新能源、虚拟电厂等新业务）归根结底需要并网运行，电力系统的要求是强制性的，研发团队需要有人理解系统甲方的需求。